\documentclass{llncs}

\usepackage{llncsdoc}
\usepackage{graphicx,url}
\usepackage[USenglish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{float}
\usepackage{setspace}

\usepackage{tabularx}
\usepackage{cite}
\usepackage{hyperref}
\usepackage{subcaption}

\begin{document}
\sloppy
\title{Mezuro: Understading source code metrics}

\author{Rafael Manzo\inst{1}, Diego Camarinha\inst{1},
        Dylan Guedes\inst{1}, Paulo Meirelles\inst{1,2}}

\institute{Instituto de Matemática e Estatística -- Universidade de São Paulo (USP)\\
  Rua do Matão, 1010 -- 05508-090 -- Cidade Universitária -- São Paulo -- SP -- Brasil\\
  \email{\{diegoamc,manzo\}@ime.usp.br}
  \and
  Faculdade do Gama -- Universidade de Brasília (UnB)\\
  Gama -- DF -- Brasil\\
  \email{djmgguedes@gmail.com,paulormm@unb.br}}

\maketitle
\begin{abstract}
  % Contexto
  The ease of development and maintenance of a software is directly related
with its source code quality.
  % Problema
  However, its analysis has issues like, for instance, definition of what
metrics to use, and interpretation of measure results. Besides that, this practice
is still not common in developer environments. Another problem is the lack of
free tools that integrate metric collectors to different programming languages.
  % Soluções propostas
In this work we present Mezuro, a free web platform to collaboratively evaluate
source code. The project provides ways to compare projects and share knowledge
about metrics, teaching how to configure and interpret them. The platform was
planned to integrate multiple metric collectors for several programming
languages, and, currently, allows analysis of source code writted in C, C++,
Java, and Ruby.
  % Frase de impacto
    With this project we expect to spread knowledge and encourage the use of
code metrics.

\textbf{Keywords:} static analysis, code metrics, free software.
\end{abstract}

\section{Introduction}
\label{sec:intro}

Static source code metrics are measures extracted from code without compiling
or nunning it. These metrics can be primitive or composed, and have as main
role the function to provide information about complexity, compreension,
testability, maintainability and evolution of code (REF).

Metrics can be simple such as lines of code and number of methods per class or
complex as afferent connections of a class. Nowadays, several tools can be
used to extract metrics, such as
pylint\footnote{\url{http://www.pylint.org/}} (Python),
metric\_fu\footnote{\url{https://github.com/metricfu/metric_fu}} (Ruby), and
Analizo\footnote{\url{http://www.analizo.org/}} (C/C++ and Java), each one with
different levels of usability, definitions and set of metrics, being necessary
the creation of a platform that brings and present these results to the end
user, specially in tracking the software during its life cycle.

Code metric tools, in general, do not present a friendly interface, and,
even more, do not follow a standard. Therefore, this work present the
Mezuro platform, which (i) has an interface that groups available tools;
(ii) allow selection and composition of metrics in a flexible manner;
(iii) preserves the evolution log;
(iv) presents results in a friendly way;
(v) allow the user to create interpretation parameters based on the given
context.

\section{Related tools}

There are two tools related to Mezuro. The first, SonarQube\footnote{\url{http://www.sonarqube.org/}}, is a free software licensed as LGPLv3, and offers a platform to manage software quality by using plugins through a 
library\footnote{\url{http://docs.codehaus.org/display/SONAR/Plugin+Library/}}.
At its most basic version it classifies code problems and evaluate simple
coverage metrics and technical debts in several languages. However, its best
plugins are paid and closed source, such as the
C/C++ analyzer\footnote{\url{http://www.sonarsource.com/products/plugins/languages/cpp/}}.

The second, Code Climate\footnote{\url{https://codeclimate.com/}}, is a tool
that analysis source code hosted in a Git server, and has support for several
programming languages and frameworks. The analysis will look for code smells
in the code and classify them based on aspects such as size of methods and
code duplication. Lastly, based on the score of its parts, the given project
will receive a grade between A and F. Keep in mind that what is tagged as an
issue sometimes is not a real problem, since it could be the best solution for
the given scenario.

Mezuro, idealized as a code metrics platform, has the differential to
continuous generate reviews about the project: the user schedule the
analysis and follows scores evolution over time. Results of each analysis
are public, what allows greater transparency between the developer and the
community that uses the software. Thereby, they can decide if the given solution
meets the requirements and if they should trust in the quality of the software.

\section{The Mezuro project}
\label{sec:mezuro}

Mezuro is composed of two parts: processing and evaluation of source code
metrics; and a graphic interface to present results. Nowadays, the processing
module is Kalibro and the visualization Prezento, Mezuro being so the set of
these projects, that is, Kalibro integrated with Prezento.

Since its first implementation in 2010 (REF cbsoft 2012) until being completely
rewritted, the architecture of the system evolved till the adoption of the
microservice architecture, in order to (i) minimizes the amount of code to
maintain;
(ii) test and grant quality of code;
(iii) modularize the application in several independent services.

\begin{figure}[H]
  \centering
    \includegraphics[width=\textwidth]{images/mezuro-architecturev2.png}
  \caption{Current architecture of the system.}
  \label{fig:architecture-2}
\end{figure}

%TODO Dylan: Possivelmente essa figura não é mais do estado atual - ver com o Manzo e Diego.

The current Mezuro state is specified at Figure \ref{fig:architecture-2}. Ellipses represents
softwares involved and parallelograms the communication interfaces between them. At Mezuro's
base we have Kalibro, segmented in three smaller entities (...).

Mezuro features can be divided in two groups:

\begin{itemize}
    \item Project

    \begin{itemize}
        \item Download of source code via repositories (Git, Subversion, Bazaar etc) or via compressed file;
        \item Scheduling of code processing (1 day, 2 days, weekly, biweekly, and monthly);
        \item Definition of what metric configuration should be used for each file;
        \item Graphical analysis of each file via dotted plot with scores over time;
        \item Public results that are accessible by the community.
    \end{itemize}
    \item Configuration
    \begin{itemize}
        \item Configuration cloning and creation;
        \item Statistics about most popular configurations in the community;
        \item Creation of qualitative ranges associated with values of metrics;
        \item Creation of reading groups to be used in textual interpretation of metrics results;
        \item Combination of native metrics to create composed and more complex analysis.
    \end{itemize}
\end{itemize}

\begin{figure}[H]
    \centering
    \begin{minipage}{.5\textwidth}
        \centering
        \includegraphics[width=.9\linewidth]{images/mezuro-feature1.png}
        % \caption{Feature 1}
        \captionof{figure}{Code analysis feature.}
        \label{fig:feature-1}
    \end{minipage}%
    \begin{minipage}{.5\textwidth}
        \centering
        \includegraphics[width=.9\linewidth]{images/mezuro-feature2.png}
        \captionof{figure}{Configuration creation feature.}
        \label{fig:feature-2}
    \end{minipage}
\end{figure}

%TODO Dylan: Adicionar duas imagens do Mezuro, a lado a lado

Mezuro has a social network shape, in which participants can observe other
projects, or clone their configurations and definitions. This open mutual
interaction can be interesting to project managers, software
auditors and even an entire developer team. The final goal is to create a
community that see value in such methodologies and how this can contribute
to the success of their projects.

\section{Final remarks}

Mezuro arise as a potential answer to the lack of tracking and standardization
of source code and the necessity to evaluate it, while being free software,
highly costumizable, with support to many programming languages, disposing of
a friendly interface, providing processing log and also with an extensible
architecture planned to easily embody new features.

%TODO Paulo: mais coisas ...

\bibliographystyle{splncs03}
\bibliography{mezuro}
\end{document}
